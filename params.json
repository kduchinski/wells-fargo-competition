{"name":"Wells Fargo 2015 Campus Analytics Challenge","tagline":"","body":"# Introduction\r\nBusinesses want to know what their clients think, but company-conducted surveys are not always effective. On social media, consumers constantly and voluntarily provide feedback on everything from pictures of cats to their local bank. Wells Fargo sponsored a challenge for students at select colleges and universities to \"[develop] a repeatable process that identifies, classifies, and extracts the underlying drivers of consumer financial conversations and comments in social media data.\" Wells Fargo provided a sample of anonymonized posts from the popular social media platforms Twitter and Facebook. The names of the four banks most often mentioned in the sample have been changed to BankA, BankB, BankC, and BankD. We, a team of three students at College of Charleston, created a script that presents the most popular financial topics in word clouds and term-frequency plots and analyzes the sentiment (positivity or negativity) of each post toward banking. Our goal was to discover what topics concern clients of each bank, how they feel about those topics, and their opinions on both their banks of choice and banking in general. Our process is outlined in the flowchart below.  \r\n\r\n![Flowchart](http://i.imgur.com/0mxaj6f.png)\r\n# \"What financial topics do consumers discuss on social media and what caused the consumers to post about this topic?\"\r\n##Approach\r\nWord clouds, clusters of related words, allow us to visually represent words that occur frequently. Thus, they can reveal what consumers talk about on social media. We split the data into collections of posts related to each bank respectively and removed common words like prepositions, URLs, and the name of the bank in question. We then determined the most frequently used words and spell-checked them before making a word cloud. Term-frequency plots, bar graphs of how often each word appears in the Facebook and Twitter posts, represent the same information but in a quantitative manner. From these graphs we derived popular banking topics on\r\nsocial media. But are users praising these aspects of banking or criticizing them? Sentiment analysis determines if a given word is positive or negative. We treated the social media posts about each banking topic as a list of words in order to see if the social conversation around different aspects of banking is positive or negative overall.\r\n```R\r\n#To isolate posts mentioning BankA \r\nbankA.idx = which(sapply(df$FullText,function(x) grepl(\"BankA\",x)))\r\n#To isolate posts mentioning BankA and service\r\nservice.idx = which(sapply(df$FullText[bankA.idx],function(x) grep1(\"service\",x)))\r\n``` \r\n##Bank A\r\n![Bank A Wordcloud](http://i.imgur.com/zcWUqB5.png?1) | ![Bank A Term-Frequency Plot](http://i.imgur.com/Q49QN44.png?1)\r\n----------------------------------------------------- | ---------------------------------------------------------------\r\nThese graphs depict the most frequently-used words in tweets and Facebook posts about BankA. All of the words in the word cloud appear at least 700 times, and all of the words in the term-frequency plot appear at least 1000 times. \r\n\r\nConsumers frequently compare BankA to BankB, so BankB may be BankA's biggest competitor. They also compare it\r\nto BankD to a lesser extent. The words \"great\" and \"good\" appear much more frequently than \"hate\" or profanities, which suggests that there may be more positive posts than negative posts concerning BankA. Some interesting topics that appear in the word cloud are **service**, **deposit**, and **card**.  \r\n\r\n![Service](http://i.imgur.com/aSWiwZb.png?2) | ![Deposit](http://i.imgur.com/ZioqBvV.png?2) | ![Card](http://i.imgur.com/9KwBH79.png?2)\r\n------------ | ------------ | ---------  \r\n\r\n##Bank B\r\n![Bank B Wordcloud](http://i.imgur.com/Cxxvipl.png?1) | ![Bank B Term-Frequency Plot](http://i.imgur.com/0DSvC7k.png?1)\r\n----------------------------------------------------- | ---------------------------------------------------------------   \r\nThese graphs depict the most frequently-used words in tweets and Facebook posts about BankB. All of the words in the word cloud appear at least 700 times, and all of the words in the term-frequency plot appear at least 1000 times. \r\nset\r\nSocial media users often compare BankB to each of the other three banks, though BankC is mentioned only about half as often as Banks A and D. Unlike for BankA, for BankB profanity is present in the posts about as often as the words \"good\" and \"great,\" which may indicate a less positive reception of BankB. **Check**, **card**, and **service** are a few key terms from BankB's word cloud.  \r\n\r\n![Check](http://i.imgur.com/niPsBo9.png?1) | ![Card](http://i.imgur.com/fe97Jgu.png?1) | ![Service](http://i.imgur.com/pZTzk4Y.png?1)\r\n---------- | ------- | ----------\r\n##Bank C\r\n![Bank C Wordcloud](http://i.imgur.com/zXFuQbG.png?2) | ![Bank C Term-Frequency Plot](http://i.imgur.com/RVxXw2b.png?1)\r\n----------------------------------------------------- | ---------------------------------------------------------------  \r\nThese graphs depict the most frequently-used words in tweets and Facebook posts about BankB. All of the words in the word cloud appear at least 400 times, and all of the words in the term-frequency plot appear at least 1000 times. The minimum frequency for BankC's word cloud was lowered because consumers mention each of the other three banks about twice as much as BankC.  \r\n\r\nFar fewer posts in the dataset mention BankC than any of the other three banks. BankC may have less account holders than the other banks, or BankC may be more popular among clients over the age of 50, fewer of whom use social networking websites ([Pew Research Center](http://www.pewinternet.org/fact-sheets/social-networking-fact-sheet/)). The financial terms we will analysis for sentiment for BankC are **card**, **credit**, and **rate**.  \r\n\r\n![Card](http://i.imgur.com/USmBZOZ.png?2) | ![Credit](http://i.imgur.com/K2XwJbS.png?1) | ![Rate](http://i.imgur.com/V1Ik3Lb.png?1)\r\n--------- | ----------- | ---------\r\n##Bank D\r\n![Bank D Wordcloud](http://i.imgur.com/LHnTSiS.png?1) | ![Bank D Term-Frequency Plot](http://i.imgur.com/uNUOQQ1.png?1)\r\n----------------------------------------------------- | ---------------------------------------------------------------  \r\nThese graphs depict the most frequently-used words in tweets and Facebook posts about BankD. All of the words in the word cloud appear at least 700 times, and all of the words in the term-frequency plot appear at least 1000 times. \r\n\r\nFor each bank, the names of at least two other banks appear in the word cloud. However, the term-frequency plots show that posts about BankD do not mention other banks as much as posts about Banks A, B, and C. In other words, posts related to BankD are primarily about BankD rather than about comparing BankD to another bank. Interestingly, posts about BankD do not use as many adjectives as Banks A and B, either, and the word \"news\" appears in the word cloud. It is possible that many of the social media posts about BankD are made by online news accounts rather than consumers. A few intriguing terms from the word cloud are: **program**, **manage**, and **service**.  \r\n\r\n![Program](http://i.imgur.com/BH12Exs.png?1) | ![Manage](http://i.imgur.com/2h6OV3B.png?1) | ![Service](http://i.imgur.com/0CR5Rxj.png?1)\r\n------------ | ----------- | ------------\r\n```R\r\n#To generate a word cloud from a term-document matrix \"tdm\"\r\nlibrary(wordcloud)\r\nm <- as.matrix(tdm)\r\nword.freq <- sort(rowSums(m), decreasing = T)\r\npal <- brewer.pal(9, \"BuGn\")\r\npal <- pal[-(1:4)]\r\nlibrary(wordcloud)\r\nwordcloud(words = names(word.freq), freq = word.freq, min.freq=2500, random.order=F, random.color=F, colors = pal)\r\n```\r\n```R\r\n#To generate a term-frequency plot from a term-document matrix \"tdm\"\r\nterm.freq <- rowSums(as.matrix(tdm))\r\nterm.freq <- subset(term.freq, term.freq >= 5000) #Selects terms that occur more than 5000 times\r\ndf <- data.frame(term = names(term.freq), freq = term.freq)\r\nlibrary(ggplot2)\r\nggplot(df, aes(x=term, y=freq)) + geom_bar(stat = \"identity\") + xlab(\"Terms\") + ylab(\"Count\") + coord_flip()\r\n```\r\nOur sentiment analysis involves the custom function score.sentiment, which can be found at the bottom of this webpage.\r\n```R\r\n#To generate a sentiment analysis box plot from a dataframe \"df\" containing consumer comments under the column \"FullText\"\r\nscores = score.sentiment(df$FullText, pos, neg, .progress='text')\r\nscores$very.pos = as.numeric(scores$score >= 2)\r\nscores$very.neg = as.numeric(scores$score <= -2)\r\n# set column names and colors\r\ncols = c(\"#7CAE00\", \"#00BFC4\")\r\nnames(cols) = c(\"twitter\", \"facebook\")\r\nlibrary(ggplot2)\r\nggplot(scores, aes(x=mediatype, y=score, group=mediatype)) +\r\n  geom_boxplot(aes(fill=mediatype)) +\r\n  scale_fill_manual(values=cols) +\r\n  geom_jitter(colour=\"gray40\",position=position_jitter(width=0.2), alpha=0.3) +\r\n  labs(title = \"Media Type's Sentiment Scores\") + \r\n  xlab('Media Type') + ylab('Sentiment Score')\r\n```\r\n# \"Are the topics and 'substance' consistent across the industry or are they isolated to individual banks?\"\r\n##Approach\r\nIn order to answer this question, we first generated a word cloud and term-frequency plot for the entire dataset. Comparison of the word clouds for the industry and the individual banks allowed us to note topics both common across the industry and unique to each bank. Sentiment analysis reveals how consumers feel about banking in general as well as the individual banks. We generated global sentiment scores which represent the positivity rating of the social media posts toward each bank. Box plots and bar graphs of sentiment further break down public opinions of banking by social media platform. They also show the average sentiment score of a single tweet or Facebook post, i.e. the average number of positive words - negative words per post.\r\n##Industry\r\n![Wordcloud](http://i.imgur.com/aRQG1XL.png?1) | ![Term-frequency plot](http://i.imgur.com/J9OK3BW.png?1)\r\n:--------------------------------------------: | :------------------------------------------------------:\r\nThe terms in the word cloud appeared in the data at least 2500 times, and those in the term-frequency plot appeared at least 5000 times.  \r\n\r\nBankD is the single bank most often mentioned in the sample of tweets and Facebook posts, and BankC is the least often mentioned. Financial terms that commonly surface in discussion of each bank and the banking industry are: business, service, card, check, credit, custom, account, and money. Topics unique to each bank are tabulated below.  \r\n\r\nBank  | Unique Topics\r\n:---: | :----------------------------:\r\nBankA | families, home, donation\r\nBankB | Chicago, corporate, settlement\r\nBankC | invest, analyst, oil\r\nBankD | program, mission, vote\r\n\r\nGlobal sentiment scores generated from our sentiment analyses are represented as a percentage of positive posts out of positive and negative posts. A positive post must use at least two more positive words than negative words. This figure does not account for posts that have neutral sentiments, but 50% represents a neutral score. Global sentiment scores for the industry and each bank are tabulated below.  \r\n\r\nBank     | Sentiment Score\r\n:------: | :--------------:\r\nIndustry | 62%\r\nBankA    | 65%\r\nBankB    | 55%\r\nBankC    | 52%\r\nBankD    | 53%  \r\n\r\nThe social conversation around banking seems to be somewhat positive in general. BankA seems to be the most popular bank in terms of positive criticism, though BankD is mentioned the most on social media. With the exception of BankA, all of the individual banks fall below the industry sentiment score and have scores very close to neutral. However, the data might represent a deflated view of consumer's opinions on these banks because in some of the posts, clients are reaching out to the banks for help with specific problems. For example, BankB's help Twitter handle was frequently used but removed from the graphs because it was not considered a topic.  \r\n\r\nLet's look more closely at the results for sentiment analysis.  \r\n\r\n![Boxplot](http://i.imgur.com/SMGu2Aq.png?1) | ![Bar graph](http://i.imgur.com/cYyBAft.png?1)\r\n-------------------------------------------- | ----------------------------------------------\r\n\r\nThese graphs represent the average sentiment score for an individual tweet or Facebook post. Scores for individual posts are overlaid in gray on the box plots. The interquartile ranges for both Twitter and Facebook rest slightly about zero, indicating that most posts are very slightly positive in sentiment. Because posts on Twitter are limited to 140 characters and posts on Facebook are often just as short, it is unusual for a single post to have more than 10 positive or negative words. The average score for a single post is less than 1 for both Twitter and Facebook, but the scores are slightly positive. Facebook users also use more positive words on average than Twitter users. These two statements set a trend for the individual banks as well. Tweets may be more negative than Facebook posts because people may prefer to contact customer service through Twitter, because the slightly younger Twitter userbase is less satisfied with banking, or because the very casual Twitter environment lends itself more easily to the use of expletives ([Wright State University](http://wiki.knoesis.org/index.php/Cursing_in_English_on_Twitter)). \r\n##Bank A\r\n![Bank A Boxplot](http://i.imgur.com/ATwyvzj.png?1) | ![Bank A Sentiment Graph](http://i.imgur.com/yjSNcoF.png?1)\r\n--------------------------------------------------- | --------------------------------------------------------------- \r\nGlobal sentiment score: 65%  \r\n\r\nThe interquartile ranges for sentiment on both Facebook and Twitter are both completely positive, which suggests that the global sentiment score is positive as well. In fact, BankA not only has the most positive sentiment score of the individual banks but also has a more positive score than the industry. If we consider the industry sentiment score as average, then BankA is the only bank that has an above-average sentiment score. We also see that Facebook has a higher average sentiment score than Twitter, though the difference between them is small.\r\n##Bank B  \r\n![Bank B Boxplot](http://i.imgur.com/sasCiQ3.png?1) | ![Bank B Sentiment Graph](http://i.imgur.com/FvaBSpz.png?1)\r\n--------------------------------------------------- | --------------------------------------------------------------- \r\nGlobal sentiment score: 55%  \r\n\r\nBankB's box plot for Facebook has a comparatively large interquartile range, which indicates that Facebook users have a more varied range of comments on BankB. Users provided a range of both positive and negative comments, as the interquartile range is centered on a neutral sentiment score. The bar graph shows that despite the range of comments, the average Facebook post was still somewhat positive. In contrast, the box plot for Twitter has a very small interquartile range that is very slightly positive. BankB's global sentiment score is just above the neutral score, 50%, yet it is much lower than the industry average.\r\n##Bank C  \r\n![Bank C Boxplot](http://i.imgur.com/ttCdheJ.png?1) | ![Bank C Sentiment Graph](http://i.imgur.com/Twosl3D.png?1)\r\n--------------------------------------------------- | --------------------------------------------------------------- \r\nGlobal sentiment score: 52%  \r\n\r\nThe sentiment analysis for BankC returned graphs very similar to those for BankB. However, the interquartile range for BankC on Facebook is smaller and entirely positive. Tweets about BankC are also a little less positive than tweets about BankB-- BankC's average Twitter score is closer to neutral. BankC also has the highest difference between average sentiment scores for Twitter and Facebook. BankC's global sentiment score is very close neutral, though it is still marginally positive. BankC has the lowest sentiment score of the banks, and its score is 10% lower than the industry average. However, BankC receives only half of the social media attention that BankA, BankB, and BankD receive, and therefore its score may not be as accurate as the others.\r\n##Bank D  \r\n![Bank D Boxplot](http://i.imgur.com/uG3gFJU.png?1) | ![Bank D Sentiment Graph](http://i.imgur.com/4apTcbD.png?1)\r\n--------------------------------------------------- | --------------------------------------------------------------- \r\nGlobal sentiment score: 53%  \r\n\r\nBoth of BankD's box plots have very small interquartile ranges and averages very near zero. BankD is unique among the four banks in that its average sentiment score on Twitter is higher than on Facebook. The reason for this is unclear, but the difference between the two social media platforms is slight in all cases. BankD's global sentiment score is almost as low as BankC's, so it is also barely above neutral. Unlike BankC, a large quantity of posts mention BankD, so the sentiment score is as accurate as any of the others. Therefore we may conclude that consumers on Twitter and Facebook are not responding to BankD as well as BankA or banking in general.\r\n##Methods\r\nThe sentiment analysis again uses score.sentiment, which can be found at the bottom of this webpage.\r\n```R\r\n#To generate a global sentiment score from a dataframe \"df\" containing consumer comments under the column \"FullText\"\r\nscores = score.sentiment(df$FullText, pos, neg, .progress='text')\r\nscores$very.pos = as.numeric(scores$score >= 2)\r\nscores$very.neg = as.numeric(scores$score <= -2)\r\n# how many very positive comments and very negative comments\r\nnumpos = sum(scores$very.pos)\r\nnumneg = sum(scores$very.neg)\r\n# creation of global score\r\nglobal_score = round( 100 * numpos / (numpos + numneg) )\r\nscores$mediatype = df.sentiment$MediaType\r\n```\r\n```R\r\n#To create a bar graph of average sentiment scores using the dataframe \"scores\" created above\r\n# set column names and colors\r\ncols = c(\"#7CAE00\", \"#00BFC4\")\r\nnames(cols) = c(\"twitter\", \"facebook\")\r\nmeanscore = tapply(scores$score, scores$mediatype, mean)\r\ndf.plot = data.frame(mediatype=names(meanscore), meanscore=meanscore)\r\ndf.plot$mediatypes <- reorder(df.plot$mediatype, df.plot$meanscore)\r\nggplot(df.plot, aes(x = factor(mediatypes), y = meanscore, fill=mediatypes)) +\r\n  geom_bar(stat=\"identity\") +\r\n  scale_fill_manual(values=cols[order(df.plot$meanscore)]) +\r\n  labs(title = \"Average Sentiment Score\") + \r\n  xlab('Media Type') + ylab('Average Score')\r\n```\r\n###score.sentiment\r\n```R\r\nscore.sentiment = function(sentences, pos.words, neg.words, .progress='none')\r\n{\r\n  require(plyr)\r\n  require(stringr)\r\n\r\n  scores = laply(sentences, function(sentence, pos.words, neg.words)\r\n  {\r\n    word.list = str_split(sentence, '\\\\s+') #splits sentences for analysis into individual words\r\n    words = unlist(word.list)\r\n\r\n    # compare our words to the dictionaries of positive & negative terms\r\n    pos.matches = match(words, pos.words)\r\n    neg.matches = match(words, neg.words)\r\n    pos.matches = !is.na(pos.matches)\r\n    neg.matches = !is.na(neg.matches)\r\n    \r\n    score = sum(pos.matches) - sum(neg.matches)\r\n    return(score)\r\n  }\r\n  \r\n  scores.df = data.frame(score=scores, text=sentences)\r\n  return(scores.df)\r\n}\r\n```\r\n## Authors, Contributors, and Acknowledgements\r\nKatherine Duchinski (@kduchinski): programmer    \r\n\r\nKenzie Nash (@nashkenziem): process consultant     \r\n\r\nEmily Berich (@emilyberich): report compiler    \r\n \r\n      \r\n\r\nThank you to Wells Fargo for holding this contest and choosing College of Charleston.     \r\n\r\nThank you to MindSumo for hosting this challenge.    \r\n\r\nThank you to our professor, Dr. Paul Anderson, for all your help and encouragement.        \r\n\r\n     \r\n\r\nLast edited by Katherine Duchinski on December 10, 2015.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}